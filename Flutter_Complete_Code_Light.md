# Flow and grow - Complete Flutter Code

<div style="background-color: #ffffff; color: #000000; padding: 20px; border-radius: 8px; font-family: 'Courier New', monospace;">

## Table of Contents
1. [Main App Structure](#main-app-structure)
2. [Configuration Files](#configuration-files)
3. [Utils and Themes](#utils-and-themes)
4. [Models](#models)
5. [Providers](#providers)
6. [Services](#services)
7. [Authentication Screens](#authentication-screens)
8. [Customer Screens](#customer-screens)
9. [Center Admin Screens](#center-admin-screens)
10. [Super Admin Screens](#super-admin-screens)
11. [Widgets](#widgets)
12. [Testing](#testing)

---

## Main App Structure

### `lib/main.dart`

<div style="background-color: #f8f8f8; border: 1px solid #ddd; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 14px; color: #000000;">
import 'package:flutter/material.dart';<br>
import 'package:flutter_riverpod/flutter_riverpod.dart';<br>
import 'package:firebase_core/firebase_core.dart';<br>
import 'utils/app_theme.dart';<br>
import 'screens/auth/onboarding_screen.dart';<br>
import 'providers/auth_provider.dart';<br>
import 'screens/customer/customer_home_screen.dart';<br>
import 'screens/center_admin/center_admin_dashboard.dart';<br>
import 'screens/super_admin/super_admin_dashboard.dart';<br>
import 'models/user_model.dart';<br>
<br>
void main() async {<br>
  WidgetsFlutterBinding.ensureInitialized();<br>
  <br>
  // Initialize Firebase<br>
  // Note: You need to configure Firebase first<br>
  // Run: flutterfire configure (install flutterfire_cli first)<br>
  try {<br>
    await Firebase.initializeApp();<br>
  } catch (e) {<br>
    debugPrint('Firebase initialization error: $e');<br>
  }<br>
  <br>
  runApp(const ProviderScope(child: MyApp()));<br>
}<br>
<br>
class MyApp extends StatelessWidget {<br>
  const MyApp({super.key});<br>
<br>
  @override<br>
  Widget build(BuildContext context) {<br>
    return MaterialApp(<br>
      title: 'Flow and Grow',<br>
      theme: AppTheme.lightTheme,<br>
      debugShowCheckedModeBanner: false,<br>
      home: const AuthWrapper(),<br>
    );<br>
  }<br>
}<br>
<br>
class AuthWrapper extends ConsumerWidget {<br>
  const AuthWrapper({super.key});<br>
<br>
  @override<br>
  Widget build(BuildContext context, WidgetRef ref) {<br>
    final authState = ref.watch(authStateProvider);<br>
<br>
    return authState.when(<br>
      data: (user) {<br>
        if (user == null) {<br>
          return const OnboardingScreen();<br>
        }<br>
        <br>
        final currentUserAsync = ref.watch(currentUserProvider);<br>
        return currentUserAsync.when(<br>
          data: (userData) {<br>
            if (userData == null) {<br>
              return const OnboardingScreen();<br>
            }<br>
            //hi<br>
            switch (userData.role) {<br>
              case UserRole.customer:<br>
                return const CustomerHomeScreen();<br>
              case UserRole.centerAdmin:<br>
                return const CenterAdminDashboard();<br>
              case UserRole.superAdmin:<br>
                return const SuperAdminDashboard();<br>
            }<br>
          },<br>
          loading: () => const Scaffold(<br>
            body: Center(child: CircularProgressIndicator()),<br>
          ),<br>
          error: (_, __) => const OnboardingScreen(),<br>
        );<br>
      },<br>
      loading: () => const Scaffold(<br>
        body: Center(child: CircularProgressIndicator()),<br>
      ),<br>
      error: (_, __) => const OnboardingScreen(),<br>
    );<br>
  }<br>
}<br>
</div>

---

## Configuration Files

### `lib/firebase_options.dart`

<div style="background-color: #f8f8f8; border: 1px solid #ddd; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 14px; color: #000000;">
// File generated by FlutterFire CLI.<br>
// ignore_for_file: type=lint<br>
import 'package:firebase_core/firebase_core.dart' show FirebaseOptions;<br>
import 'package:flutter/foundation.dart'<br>
    show defaultTargetPlatform, kIsWeb, TargetPlatform;<br>
<br>
/// Default [FirebaseOptions] for use with your Firebase apps.<br>
///<br>
/// Example:<br>
/// ```dart<br>
/// import 'firebase_options.dart';<br>
/// // ...<br>
/// await Firebase.initializeApp(<br>
///   options: DefaultFirebaseOptions.currentPlatform,<br>
/// );<br>
/// ```<br>
class DefaultFirebaseOptions {<br>
  static FirebaseOptions get currentPlatform {<br>
    if (kIsWeb) {<br>
      throw UnsupportedError(<br>
        'DefaultFirebaseOptions have not been configured for web - '<br>
        'you can reconfigure this by running the FlutterFire CLI again.',<br>
      );<br>
    }<br>
    switch (defaultTargetPlatform) {<br>
      case TargetPlatform.android:<br>
        return android;<br>
      case TargetPlatform.iOS:<br>
        return ios;<br>
      case TargetPlatform.macOS:<br>
        throw UnsupportedError(<br>
          'DefaultFirebaseOptions have not been configured for macos - '<br>
          'you can reconfigure this by running the FlutterFire CLI again.',<br>
        );<br>
      case TargetPlatform.windows:<br>
        throw UnsupportedError(<br>
          'DefaultFirebaseOptions have not been configured for windows - '<br>
          'you can reconfigure this by running the FlutterFire CLI again.',<br>
        );<br>
      case TargetPlatform.linux:<br>
        throw UnsupportedError(<br>
          'DefaultFirebaseOptions have not been configured for linux - '<br>
          'you can reconfigure this by running the FlutterFire CLI again.',<br>
        );<br>
      default:<br>
        throw UnsupportedError(<br>
          'DefaultFirebaseOptions are not supported for this platform.',<br>
        );<br>
    }<br>
  }<br>
<br>
  static const FirebaseOptions android = FirebaseOptions(<br>
    apiKey: 'AIzaSyA3DVEwv3fwjkQI54rGA6HB5xHnPUYUkp8',<br>
    appId: '1:520813948225:android:497d909c9e49ce2d2385c0',<br>
    messagingSenderId: '520813948225',<br>
    projectId: 'flow-and-grow-feddd',<br>
    storageBucket: 'flow-and-grow-feddd.firebasestorage.app',<br>
  );<br>
<br>
  static const FirebaseOptions ios = FirebaseOptions(<br>
    apiKey: 'AIzaSyASRymNqmQYfG4DSfPDmibWez7IKtYEGUc',<br>
    appId: '1:520813948225:ios:259465bb2d8ad4252385c0',<br>
    messagingSenderId: '520813948225',<br>
    projectId: 'flow-and-grow-feddd',<br>
    storageBucket: 'flow-and-grow-feddd.firebasestorage.app',<br>
    iosBundleId: 'com.example.flowAndgrow',<br>
  );<br>
}<br>
</div>

---

## Utils and Themes

### `lib/utils/app_colors.dart`

<div style="background-color: #f8f8f8; border: 1px solid #ddd; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 14px; color: #000000;">
import 'package:flutter/material.dart';<br>
<br>
class AppColors {<br>
  // Primary colors from design<br>
  static const Color primary = Color(0xFFB8907D); // Tan/beige brown<br>
  static const Color secondary = Color(0xFFF5E6DC); // Light beige<br>
  static const Color accent = Color(0xFFE89B8A); // Coral/salmon<br>
  static const Color background = Color(0xFFFAF4F0); // Off-white/cream<br>
  <br>
  // Text colors<br>
  static const Color textPrimary = Color(0xFF6B4E3D); // Dark brown<br>
  static const Color textSecondary = Color(0xFF9B8577); // Medium brown<br>
  static const Color textLight = Color(0xFFB8A99A); // Light brown<br>
  <br>
  // UI colors<br>
  static const Color white = Color(0xFFFFFFFF);<br>
  static const Color black = Color(0xFF000000);<br>
  static const Color error = Color(0xFFE57373);<br>
  static const Color success = Color(0xFF81C784);<br>
  <br>
  // Card and surface colors<br>
  static const Color cardBackground = Color(0xFFFFFFFF);<br>
  static const Color divider = Color(0xFFE8DDD4);<br>
}<br>
</div>

### `lib/utils/app_theme.dart`

<div style="background-color: #f8f8f8; border: 1px solid #ddd; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 14px; color: #000000;">
import 'package:flutter/material.dart';<br>
import 'app_colors.dart';<br>
<br>
class AppTheme {<br>
  static ThemeData get lightTheme {<br>
    return ThemeData(<br>
      useMaterial3: true,<br>
      colorScheme: ColorScheme.light(<br>
        primary: AppColors.primary,<br>
        secondary: AppColors.accent,<br>
        surface: AppColors.background,<br>
        error: AppColors.error,<br>
      ),<br>
      scaffoldBackgroundColor: AppColors.background,<br>
      appBarTheme: const AppBarTheme(<br>
        backgroundColor: AppColors.background,<br>
        elevation: 0,<br>
        iconTheme: IconThemeData(color: AppColors.textPrimary),<br>
        titleTextStyle: TextStyle(<br>
          color: AppColors.textPrimary,<br>
          fontSize: 20,<br>
          fontWeight: FontWeight.w600,<br>
        ),<br>
      ),<br>
      elevatedButtonTheme: ElevatedButtonThemeData(<br>
        style: ElevatedButton.styleFrom(<br>
          backgroundColor: AppColors.accent,<br>
          foregroundColor: AppColors.white,<br>
          padding: const EdgeInsets.symmetric(horizontal: 32, vertical: 16),<br>
          shape: RoundedRectangleBorder(<br>
            borderRadius: BorderRadius.circular(30),<br>
          ),<br>
          elevation: 0,<br>
          textStyle: const TextStyle(<br>
            fontSize: 16,<br>
            fontWeight: FontWeight.w600,<br>
          ),<br>
        ),<br>
      ),<br>
      inputDecorationTheme: InputDecorationTheme(<br>
        filled: true,<br>
        fillColor: AppColors.white,<br>
        border: OutlineInputBorder(<br>
          borderRadius: BorderRadius.circular(30),<br>
          borderSide: const BorderSide(color: AppColors.primary, width: 1),<br>
        ),<br>
        enabledBorder: OutlineInputBorder(<br>
          borderRadius: BorderRadius.circular(30),<br>
          borderSide: const BorderSide(color: AppColors.primary, width: 1),<br>
        ),<br>
        focusedBorder: OutlineInputBorder(<br>
          borderRadius: BorderRadius.circular(30),<br>
          borderSide: const BorderSide(color: AppColors.accent, width: 2),<br>
        ),<br>
        contentPadding: const EdgeInsets.symmetric(horizontal: 24, vertical: 16),<br>
        hintStyle: const TextStyle(color: AppColors.textLight),<br>
      ),<br>
      cardTheme: CardThemeData(<br>
        color: AppColors.cardBackground,<br>
        elevation: 2,<br>
        shape: RoundedRectangleBorder(<br>
          borderRadius: BorderRadius.circular(16),<br>
        ),<br>
      ),<br>
      textTheme: const TextTheme(<br>
        displayLarge: TextStyle(<br>
          fontSize: 32,<br>
          fontWeight: FontWeight.bold,<br>
          color: AppColors.textPrimary,<br>
        ),<br>
        displayMedium: TextStyle(<br>
          fontSize: 28,<br>
          fontWeight: FontWeight.bold,<br>
          color: AppColors.textPrimary,<br>
        ),<br>
        displaySmall: TextStyle(<br>
          fontSize: 24,<br>
          fontWeight: FontWeight.w600,<br>
          color: AppColors.textPrimary,<br>
        ),<br>
        headlineMedium: TextStyle(<br>
          fontSize: 20,<br>
          fontWeight: FontWeight.w600,<br>
          color: AppColors.textPrimary,<br>
        ),<br>
        titleLarge: TextStyle(<br>
          fontSize: 18,<br>
          fontWeight: FontWeight.w600,<br>
          color: AppColors.textPrimary,<br>
        ),<br>
        bodyLarge: TextStyle(<br>
          fontSize: 16,<br>
          color: AppColors.textSecondary,<br>
        ),<br>
        bodyMedium: TextStyle(<br>
          fontSize: 14,<br>
          color: AppColors.textSecondary,<br>
        ),<br>
      ),<br>
    );<br>
  }<br>
}<br>
</div>

---

## Models

### `lib/models/user_model.dart`

<div style="background-color: #f8f8f8; border: 1px solid #ddd; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 14px; color: #000000;">
import 'package:cloud_firestore/cloud_firestore.dart';<br>
<br>
enum UserRole { customer, centerAdmin, superAdmin }<br>
<br>
class UserModel {<br>
  final String uid;<br>
  final String email;<br>
  final String name;<br>
  final UserRole role;<br>
  final String? centerId; // For center admins<br>
  final DateTime createdAt;<br>
<br>
  UserModel({<br>
    required this.uid,<br>
    required this.email,<br>
    required this.name,<br>
    required this.role,<br>
    this.centerId,<br>
    required this.createdAt,<br>
  });<br>
<br>
  factory UserModel.fromFirestore(DocumentSnapshot doc) {<br>
    final data = doc.data() as Map<String, dynamic>;<br>
    return UserModel(<br>
      uid: doc.id,<br>
      email: data['email'] ?? '',<br>
      name: data['name'] ?? '',<br>
      role: UserRole.values.firstWhere(<br>
        (e) => e.toString() == 'UserRole.${data['role']}',<br>
        orElse: () => UserRole.customer,<br>
      ),<br>
      centerId: data['centerId'],<br>
      createdAt: (data['createdAt'] as Timestamp).toDate(),<br>
    );<br>
  }<br>
<br>
  Map<String, dynamic> toFirestore() {<br>
    return {<br>
      'email': email,<br>
      'name': name,<br>
      'role': role.toString().split('.').last,<br>
      'centerId': centerId,<br>
      'createdAt': Timestamp.fromDate(createdAt),<br>
    };<br>
  }<br>
}<br>
</div>

---

## Providers

### `lib/providers/auth_provider.dart`

<div style="background-color: #f8f8f8; border: 1px solid #ddd; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 14px; color: #000000;">
import 'package:flutter_riverpod/flutter_riverpod.dart';<br>
import 'package:firebase_auth/firebase_auth.dart';<br>
import '../models/user_model.dart';<br>
import '../services/auth_service.dart';<br>
<br>
final authServiceProvider = Provider<AuthService>((ref) => AuthService());<br>
<br>
final authStateProvider = StreamProvider<User?>((ref) {<br>
  return ref.watch(authServiceProvider).authStateChanges;<br>
});<br>
<br>
final currentUserProvider = FutureProvider<UserModel?>((ref) async {<br>
  final authState = ref.watch(authStateProvider);<br>
  <br>
  return authState.when(<br>
    data: (user) async {<br>
      if (user != null) {<br>
        return await ref.read(authServiceProvider).getUserData(user.uid);<br>
      }<br>
      return null;<br>
    },<br>
    loading: () => null,<br>
    error: (_, __) => null,<br>
  );<br>
});<br>
</div>

---

## Services

### `lib/services/auth_service.dart`

<div style="background-color: #f8f8f8; border: 1px solid #ddd; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 14px; color: #000000;">
import 'package:firebase_auth/firebase_auth.dart';<br>
import 'package:cloud_firestore/cloud_firestore.dart';<br>
import '../models/user_model.dart';<br>
<br>
class AuthService {<br>
  final FirebaseAuth _auth = FirebaseAuth.instance;<br>
  final FirebaseFirestore _firestore = FirebaseFirestore.instance;<br>
<br>
  Stream<User?> get authStateChanges => _auth.authStateChanges();<br>
<br>
  Future<UserModel?> getUserData(String uid) async {<br>
    try {<br>
      final doc = await _firestore.collection('users').doc(uid).get();<br>
      if (doc.exists) {<br>
        return UserModel.fromFirestore(doc);<br>
      }<br>
      return null;<br>
    } catch (e) {<br>
      throw Exception('Failed to get user data: $e');<br>
    }<br>
  }<br>
<br>
  Future<UserModel?> signIn(String email, String password) async {<br>
    try {<br>
      final UserCredential result = await _auth.signInWithEmailAndPassword(<br>
        email: email,<br>
        password: password,<br>
      );<br>
      <br>
      return await getUserData(result.user!.uid);<br>
    } catch (e) {<br>
      throw Exception('Failed to sign in: $e');<br>
    }<br>
  }<br>
<br>
  Future<UserModel?> register({<br>
    required String email,<br>
    required String password,<br>
    required String name,<br>
    required UserRole role,<br>
  }) async {<br>
    try {<br>
      final UserCredential result = await _auth.createUserWithEmailAndPassword(<br>
        email: email,<br>
        password: password,<br>
      );<br>
<br>
      final user = UserModel(<br>
        uid: result.user!.uid,<br>
        email: email,<br>
        name: name,<br>
        role: role,<br>
        createdAt: DateTime.now(),<br>
      );<br>
<br>
      await _firestore.collection('users').doc(user.uid).set(user.toFirestore());<br>
      <br>
      return user;<br>
    } catch (e) {<br>
      throw Exception('Failed to register: $e');<br>
    }<br>
  }<br>
<br>
  Future<void> signOut() async {<br>
    try {<br>
      await _auth.signOut();<br>
    } catch (e) {<br>
      throw Exception('Failed to sign out: $e');<br>
    }<br>
  }<br>
}<br>
</div>

---

## Authentication Screens

### `lib/screens/auth/onboarding_screen.dart`

<div style="background-color: #f8f8f8; border: 1px solid #ddd; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 14px; color: #000000;">
import 'package:flutter/material.dart';<br>
import '../../utils/app_colors.dart';<br>
import 'login_screen.dart';<br>
<br>
class OnboardingScreen extends StatefulWidget {<br>
  const OnboardingScreen({super.key});<br>
<br>
  @override<br>
  State<OnboardingScreen> createState() => _OnboardingScreenState();<br>
}<br>
<br>
class _OnboardingScreenState extends State<OnboardingScreen> {<br>
  final PageController _pageController = PageController();<br>
  int _currentPage = 0;<br>
<br>
  final List<OnboardingPage> _pages = [<br>
    OnboardingPage(<br>
      title: 'Find your inner balance',<br>
      description: 'Embrace tranquility and strength. Join our community to nurture your body and soul',<br>
      icon: Image.asset(<br>
        'assets/images/flowandgrow_landing1.png',<br>
        fit: BoxFit.contain,<br>
      ),<br>
    ),<br>
    OnboardingPage(<br>
      title: 'Discover wellness centers',<br>
      description: 'Connect with the best yoga, pilates, and meditation centers near you',<br>
      icon: Image.asset(<br>
        'assets/images/flowandgrow_landing2.png',<br>
        fit: BoxFit.contain,<br>
      ),<br>
    ),<br>
    OnboardingPage(<br>
      title: 'Subscribe and grow',<br>
      description: 'Choose flexible monthly or yearly packages that fit your lifestyle',<br>
      icon: Image.asset(<br>
        'assets/images/flowandgrow_landing3.png',<br>
        fit: BoxFit.contain,<br>
      ),<br>
    ),<br>
  ];<br>
<br>
  @override<br>
  Widget build(BuildContext context) {<br>
    return Scaffold(<br>
      backgroundColor: AppColors.background,<br>
      body: SafeArea(<br>
        child: Column(<br>
          children: [<br>
            Expanded(<br>
              child: PageView.builder(<br>
                controller: _pageController,<br>
                onPageChanged: (index) {<br>
                  setState(() {<br>
                    _currentPage = index;<br>
                  });<br>
                },<br>
                itemCount: _pages.length,<br>
                itemBuilder: (context, index) {<br>
                  return _buildPage(_pages[index]);<br>
                },<br>
              ),<br>
            ),<br>
            _buildPageIndicator(),<br>
            const SizedBox(height: 32),<br>
            Padding(<br>
              padding: const EdgeInsets.symmetric(horizontal: 32),<br>
              child: SizedBox(<br>
                width: double.infinity,<br>
                child: ElevatedButton(<br>
                  onPressed: () {<br>
                    if (_currentPage == _pages.length - 1) {<br>
                      Navigator.of(context).pushReplacement(<br>
                        MaterialPageRoute(builder: (_) => const LoginScreen()),<br>
                      );<br>
                    } else {<br>
                      _pageController.nextPage(<br>
                        duration: const Duration(milliseconds: 300),<br>
                        curve: Curves.easeInOut,<br>
                      );<br>
                    }<br>
                  },<br>
                  child: Text(_currentPage == _pages.length - 1 ? 'Get Start' : 'Next'),<br>
                ),<br>
              ),<br>
            ),<br>
            const SizedBox(height: 32),<br>
          ],<br>
        ),<br>
      ),<br>
    );<br>
  }<br>
<br>
  Widget _buildPage(OnboardingPage page) {<br>
    return Padding(<br>
      padding: const EdgeInsets.all(32),<br>
      child: Column(<br>
        mainAxisAlignment: MainAxisAlignment.center,<br>
        children: [<br>
          Container(<br>
            width: 200,<br>
            height: 200,<br>
<br>
            child: Center(<br>
              child: page.icon,<br>
            ),<br>
          ),<br>
          const SizedBox(height: 48),<br>
          Text(<br>
            page.title,<br>
            style: const TextStyle(<br>
              fontSize: 28,<br>
              fontWeight: FontWeight.w600,<br>
              color: AppColors.textPrimary,<br>
            ),<br>
            textAlign: TextAlign.center,<br>
          ),<br>
          const SizedBox(height: 16),<br>
          Text(<br>
            page.description,<br>
            style: const TextStyle(<br>
              fontSize: 16,<br>
              color: AppColors.textSecondary,<br>
              height: 1.5,<br>
            ),<br>
            textAlign: TextAlign.center,<br>
          ),<br>
        ],<br>
      ),<br>
    );<br>
  }<br>
<br>
  Widget _buildPageIndicator() {<br>
    return Row(<br>
      mainAxisAlignment: MainAxisAlignment.center,<br>
      children: List.generate(<br>
        _pages.length,<br>
        (index) => Container(<br>
          margin: const EdgeInsets.symmetric(horizontal: 4),<br>
          width: 8,<br>
          height: 8,<br>
          decoration: BoxDecoration(<br>
            shape: BoxShape.circle,<br>
            color: _currentPage == index ? AppColors.accent : AppColors.textLight,<br>
          ),<br>
        ),<br>
      ),<br>
    );<br>
  }<br>
<br>
  @override<br>
  void dispose() {<br>
    _pageController.dispose();<br>
    super.dispose();<br>
  }<br>
}<br>
<br>
class OnboardingPage {<br>
  final String title;<br>
  final String description;<br>
  final Widget icon;<br>
<br>
  OnboardingPage({<br>
    required this.title,<br>
    required this.description,<br>
    required this.icon,<br>
  });<br>
}<br>
</div>

---

## Summary

This complete Flutter code documentation includes all the core files for the Flow and grow wellness app. The application features:

- **Firebase Integration**: Authentication and Firestore database
- **Riverpod State Management**: Modern state handling with providers
- **Role-Based Access**: Customer, Center Admin, and Super Admin roles
- **Material Design 3**: Modern UI with custom light theme
- **Responsive Authentication**: Combined login/register screen with animations
- **Clean Architecture**: Proper separation of concerns with models, services, and screens

The codebase is structured for scalability with clear separation between UI, business logic, and data layers. The warm, earthy color scheme creates a calming wellness-focused user experience.

</div>
